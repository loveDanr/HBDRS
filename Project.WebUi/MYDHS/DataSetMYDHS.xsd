<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="DataSetMYDHS" targetNamespace="http://tempuri.org/DataSetMYDHS.xsd" xmlns:mstns="http://tempuri.org/DataSetMYDHS.xsd" xmlns="http://tempuri.org/DataSetMYDHS.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="QueriesTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="Web.config" AppSettingsPropertyName="SQLConnString" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="SQLConnString (Web.config)" ParameterPrefix="@" PropertyReference="AppConfig.System.Configuration.ConfigurationManager.0.ConnectionStrings.SQLConnString.ConnectionString" Provider="System.Data.SqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="DTNSSTableAdapter" GeneratorDataComponentClassName="DTNSSTableAdapter" Name="DTNSS" UserDataComponentName="DTNSSTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="SQLConnString (Web.config)" DbObjectName="" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByDate" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetDataByDate" GeneratorSourceName="FillByDate" GetMethodModifier="Public" GetMethodName="GetDataByDate" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetDataByDate" UserSourceName="FillByDate">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>  SELECT 项目,[5],([5]*1.0)/([5]+[4]+[1]+[0]) AS mypl,[4],([4]*1.0)/([5]+[4]+[1]+[0]) AS jbmypl ,[1],([1]*1.0)/([5]+[4]+[1]+[0]) as bmypl,[0],([0]*1.0)/([5]+[4]+[1]+[0]) AS kpl
  FROM 
  (
  SELECT 科室,项目,分数
  FROM	
  (
   SELECT * FROM HLX_MYDHS WHERE 时间 &gt;= @startDate AND 时间 &lt;=@endDate 
  ) AS psd
  UNPIVOT
   (分数 FOR 项目 IN 
      (F1, F2, F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,F16,F17,F18,F19,F20)
	) AS unpvt
  ) AS sd
  PIVOT
  (COUNT (科室)
FOR 分数 IN
( [5], [4], [1], [0] )
) AS pvt
ORDER BY CONVERT(INT,REPLACE(项目, 'F','0' ))</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="startDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="endDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="项目" DataSetColumn="Item" />
              <Mapping SourceColumn="5" DataSetColumn="my" />
              <Mapping SourceColumn="mypl" DataSetColumn="mypl" />
              <Mapping SourceColumn="4" DataSetColumn="jbmy" />
              <Mapping SourceColumn="jbmypl" DataSetColumn="jbmypl" />
              <Mapping SourceColumn="1" DataSetColumn="bmy" />
              <Mapping SourceColumn="bmypl" DataSetColumn="bmypl" />
              <Mapping SourceColumn="0" DataSetColumn="kp" />
              <Mapping SourceColumn="kpl" DataSetColumn="kpl" />
            </Mappings>
            <Sources>
              <DbSource ConnectionRef="SQLConnString (Web.config)" DbObjectName="" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByAreaName" GenerateMethods="Both" GenerateShortCommands="true" GeneratorGetMethodName="GetDataByAreaName" GeneratorSourceName="FillByAreaName" GetMethodModifier="Public" GetMethodName="GetDataByAreaName" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataByAreaName" UserSourceName="FillByAreaName">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT   项目, [5], ([5] * 1.0) / ([5] + [4] + [1] + [0]) AS mypl, [4], ([4] * 1.0) / ([5] + [4] + [1] + [0]) AS jbmypl, [1], ([1] * 1.0) 
                / ([5] + [4] + [1] + [0]) AS bmypl, [0], ([0] * 1.0) / ([5] + [4] + [1] + [0]) AS kpl
FROM      (SELECT   科室, 项目, 分数
                 FROM      (SELECT   *
                                  FROM      HLX_MYDHS
                                  WHERE   时间 &gt;= @startDate AND 时间 &lt;= @endDate AND 科室 IN
                                                      (SELECT   DeptID
                                                       FROM      Department
                                                       WHERE   DeptPQ = @areaName)) AS psd UNPIVOT (分数 FOR 项目 IN (F1, F2, F3, F4, F5, F6, 
                                 F7, F8, F9, F10, F11, F12, F13, F14, F15, F16, F17, F18, F19, F20)) AS unpvt) AS sd PIVOT (COUNT(科室) FOR 
                分数 IN ([5], [4], [1], [0])) AS pvt
ORDER BY CONVERT(INT, REPLACE(项目, 'F', '0'))</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="String" Direction="Input" ParameterName="areaName" Precision="0" ProviderType="NVarChar" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="startDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="endDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
              <DbSource ConnectionRef="SQLConnString (Web.config)" DbObjectName="" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByDeptName" GenerateMethods="Both" GenerateShortCommands="true" GeneratorGetMethodName="GetDataByDeptName" GeneratorSourceName="FillByDeptName" GetMethodModifier="Public" GetMethodName="GetDataByDeptName" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataByDeptName" UserSourceName="FillByDeptName">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>  SELECT 项目,[5],([5]*1.0)/([5]+[4]+[1]+[0]) AS mypl,[4],([4]*1.0)/([5]+[4]+[1]+[0]) AS jbmypl ,[1],([1]*1.0)/([5]+[4]+[1]+[0]) as bmypl,[0],([0]*1.0)/([5]+[4]+[1]+[0]) AS kpl
  FROM 
  (
  SELECT 科室,项目,分数
  FROM	
  (
   SELECT * FROM HLX_MYDHS WHERE 科室 = @deptName AND 时间 &gt;= @startDate AND 时间 &lt;=@endDate
  ) AS psd
  UNPIVOT
   (分数 FOR 项目 IN 
      (F1, F2, F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,F16,F17,F18,F19,F20)
	) AS unpvt
  ) AS sd
  PIVOT
  (COUNT (科室)
FOR 分数 IN
( [5], [4], [1], [0] )
) AS pvt
ORDER BY CONVERT(INT,REPLACE(项目, 'F','0' ))</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="String" Direction="Input" ParameterName="deptName" Precision="0" ProviderType="NVarChar" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="startDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="" DataSourceName="" DbType="DateTime" Direction="Input" ParameterName="endDate" Precision="0" ProviderType="DateTime" Scale="0" Size="0" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </Sources>
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="DataSetMYDHS" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="DataSetMYDHS" msprop:Generator_UserDSName="DataSetMYDHS">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="DTNSS" msprop:Generator_TableClassName="DTNSSDataTable" msprop:Generator_TableVarName="tableDTNSS" msprop:Generator_RowChangedName="DTNSSRowChanged" msprop:Generator_TablePropName="DTNSS" msprop:Generator_RowDeletingName="DTNSSRowDeleting" msprop:Generator_RowChangingName="DTNSSRowChanging" msprop:Generator_RowEvHandlerName="DTNSSRowChangeEventHandler" msprop:Generator_RowDeletedName="DTNSSRowDeleted" msprop:Generator_RowClassName="DTNSSRow" msprop:Generator_UserTableName="DTNSS" msprop:Generator_RowEvArgName="DTNSSRowChangeEvent">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Item" msprop:Generator_ColumnVarNameInTable="columnItem" msprop:Generator_ColumnPropNameInRow="Item" msprop:Generator_ColumnPropNameInTable="ItemColumn" msprop:Generator_UserColumnName="Item" type="xs:string" minOccurs="0" />
              <xs:element name="my" msprop:Generator_ColumnVarNameInTable="columnmy" msprop:Generator_ColumnPropNameInRow="my" msprop:Generator_ColumnPropNameInTable="myColumn" msprop:Generator_UserColumnName="my" type="xs:int" minOccurs="0" />
              <xs:element name="mypl" msprop:Generator_ColumnVarNameInTable="columnmypl" msprop:Generator_ColumnPropNameInRow="mypl" msprop:Generator_ColumnPropNameInTable="myplColumn" msprop:Generator_UserColumnName="mypl" type="xs:double" minOccurs="0" />
              <xs:element name="jbmy" msprop:Generator_ColumnVarNameInTable="columnjbmy" msprop:Generator_ColumnPropNameInRow="jbmy" msprop:Generator_ColumnPropNameInTable="jbmyColumn" msprop:Generator_UserColumnName="jbmy" type="xs:int" minOccurs="0" />
              <xs:element name="jbmypl" msprop:Generator_ColumnVarNameInTable="columnjbmypl" msprop:Generator_ColumnPropNameInRow="jbmypl" msprop:Generator_ColumnPropNameInTable="jbmyplColumn" msprop:Generator_UserColumnName="jbmypl" type="xs:double" minOccurs="0" />
              <xs:element name="bmy" msprop:Generator_ColumnVarNameInTable="columnbmy" msprop:Generator_ColumnPropNameInRow="bmy" msprop:Generator_ColumnPropNameInTable="bmyColumn" msprop:Generator_UserColumnName="bmy" type="xs:int" minOccurs="0" />
              <xs:element name="bmypl" msprop:Generator_ColumnVarNameInTable="columnbmypl" msprop:Generator_ColumnPropNameInRow="bmypl" msprop:Generator_ColumnPropNameInTable="bmyplColumn" msprop:Generator_UserColumnName="bmypl" type="xs:double" minOccurs="0" />
              <xs:element name="kp" msprop:Generator_ColumnVarNameInTable="columnkp" msprop:Generator_ColumnPropNameInRow="kp" msprop:Generator_ColumnPropNameInTable="kpColumn" msprop:Generator_UserColumnName="kp" type="xs:int" minOccurs="0" />
              <xs:element name="kpl" msprop:Generator_ColumnVarNameInTable="columnkpl" msprop:Generator_ColumnPropNameInRow="kpl" msprop:Generator_ColumnPropNameInTable="kplColumn" msprop:Generator_UserColumnName="kpl" type="xs:double" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema>